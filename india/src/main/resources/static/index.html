<html>
<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
</head>
<body>
<h1 style="background-color: lightgray; font-style:helvetica;" align="center">TRAVELLER INFORMATION SYSTEM</h1>
<h3 style="border: 2px solid black; background-color: 98AFC7; height:30px; text-align:center;" align="center">PROJECT 2</h3>
<h2 style="background-color: lightgray; font-style:helvetica;" align="center">PRODUCER UI</h2>
<div style="border: 2px solid black; background-color: #98AFC7" align="center" class="add-label-block">
    <h3>TOPICS ADVERTISED</h3>
    <div>
        <table id="myAdvertTable" style="border: 2px solid black; background-color: #98AFC7; width:150px"></table>
    </div>
    <form action="http://localhost:8050/deadvertise" method="post">
        <center>
            <input style="background-color: #454545; width: 200px; height:30px; text-decoration:none;
                    color:#FFFFFF; font-family:'Roboto',sans-serif; font-weight:500;" type="submit" value="DEADVERTISE"/>
        </center>
    </form>
</div>
<div align="center" style="border: 2px solid black; width:100%; background-color: lightgray" class="update-data-block">
    <h3>PUBLISH TOPIC DATA</h3>
    <div style="display: inline-block">
        <form action="http://localhost:8050/publish/india" method="post">
            <input type="submit" style="background-color: #98AFC7; width: 200px; height:30px; text-decoration:none;
                    color:#FFFFFF; font-family:'Roboto',sans-serif; font-weight:500;" name="event" id="publishIndia" value="INDIA"/>
        </form>
    </div>
    <div style="display: inline-block">
        <form action="http://localhost:8060/publish/egypt" method="post">
            <input type="submit" style="background-color: #98AFC7; width: 200px; height:30px; text-decoration:none;
                    color:#FFFFFF; font-family:'Roboto',sans-serif; font-weight:500;" name="event" id="updateVaccinations" value="EGYPT"/>
        </form>
    </div>
    <div id="update-Advise-block" style="display: inline-block">
        <form action="http://localhost:8070/publish/singapore" method="post">
            <input type="submit" style="background-color: #98AFC7; width: 200px; height:30px; text-decoration:none;
                    color:#FFFFFF; font-family:'Roboto',sans-serif; font-weight:500;" name="event" id="publshSingapore" value="SINGAPORE"/>
        </form>
    </div>
</div>
</body>
<script>
        var url2 = "http://localhost:8050/advertise";
        var xhr2 = new XMLHttpRequest()
        xhr2.open('GET', url2, true)
        xhr2.onload = function () {
            var topics = JSON.parse(xhr2.responseText);
            if (xhr2.readyState == 4 && xhr2.status == "200") {
            for (i = 0; i < topics.length; i++) {
                    var table = document.getElementById("myAdvertTable");
                    var row = table.insertRow(0);
                    var cell1 = row.insertCell(0);
                    cell1.innerHTML = topics[i];
            }
            } else {
                console.error(users);
            }
        }
        xhr2.send(null);
    </script>
</html>
